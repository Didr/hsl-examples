Our [BATV](http://wiki.halon.se/BATV) documentation shows how to implement this code.
